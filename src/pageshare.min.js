/* -------------------------------
          PageShare.js v1.0
       Created by OkShort.net
            MIT Licenced
   ------------------------------- */
const oksrt={text:"Shorten & Share",style:"round",color:null,shortened:!1,onload:async function(){this.injectCSS().catch(e=>{throw e}),this.createHTML().then(e=>{if(null==e)return;e.innerHTML=this.text,null==this.color?e.style.backgroundColor="#4C8BF5":e.style.backgroundColor=this.color;let t=null==this.color?this.toRGB("#4C8BF5"):this.toRGB(this.color),n=Math.round((299*parseInt(t.r)+587*parseInt(t.g)+114*parseInt(t.b))/1e3)>150?"black":"white";e.style.color=n}).then(()=>{this.btnEvent()}).catch(e=>{throw e})},createHTML:async function(){let e=document.querySelector("span[data-short]"),t=e.parentElement,n=document.createElement("div");n.classList.add("oksrt-con");let o=document.createElement("button");return n.appendChild(o),t.appendChild(n),t.replaceChild(n,e),o},toRGB:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},injectCSS:async function(){let e=document.createElement("style");switch(e.innerHTML=".oksrt-con{margin:16px;padding:2px;background:inherit;color:inherit;}",this.style){case"round":e.innerHTML+=".oksrt-con button{text-decoration: none;border: none;outline: none;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;font-weight: 200;-webkit-filter: brightness(100%);padding: 10px 16px;border-radius: 10px;font-size: 20px;}";break;case"round-lg":e.innerHTML+=".oksrt-con button{text-decoration: none;border: none;outline: none;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;font-weight: 200;-webkit-filter: brightness(100%);padding: 12px 20px;border-radius: 15px;font-size: 24px;}";break;case"square":e.innerHTML+=".oksrt-con button{text-decoration: none;border: none;outline: none;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;font-weight: 200;-webkit-filter: brightness(100%);padding: 10px 16px;font-size: 20px;}";break;case"square-lg":e.innerHTML+=".oksrt-con button{text-decoration: none;border: none;outline: none;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;font-weight: 200;-webkit-filter: brightness(100%);padding: 12px 20px;font-size: 24px;}";break;case"pill":e.innerHTML+=".oksrt-con button{text-decoration: none;border: none;outline: none;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;font-weight: 200;-webkit-filter: brightness(100%);padding: 10px 20px;border-radius: 32px;font-size: 20px;}";break;case"pill-lg":e.innerHTML+=".oksrt-con button{text-decoration: none;border: none;outline: none;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;font-weight: 200;-webkit-filter: brightness(100%);padding: 10px 24px;border-radius: 32px;font-size: 24px;}";break;default:e.innerHTML+=".oksrt-con button{text-decoration: none;border: none;outline: none;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;font-weight: 200;-webkit-filter: brightness(100%);padding: 10px 16px;border-radius: 10px;font-size: 20px;}"}e.innerHTML+=".oksrt-con button:hover{-webkit-filter: brightness(110%);-webkit-transition: all 500ms ease;-moz-transition: all 500ms ease;-o-transition: all 500ms ease;-ms-transition: all 500ms ease;transition: all 500ms ease;cursor: pointer;}",e.innerHTML+=".oksrt-overlay{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.5);z-index:888}.oksrt-share{display:flex;flex-direction:column;width:500px;height:auto;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:#212121;color:#f4f4f4;font-family:'Gill Sans','Gill Sans MT',Calibri,'Trebuchet MS',sans-serif;font-size:16px;padding:18px;font-weight:200;z-index:999}.oksrt-share span{position:absolute;top:0;right:0;padding:8px}.oksrt-share span button{background:0 0;border:none;outline:0;color:#f4f4f4;font-size:42px;transition:color 250ms ease}.oksrt-share span button:hover{cursor:pointer;color:#c83232}.oksrt-share h1{font-size:24px;font-weight:200;margin-top:0;margin-bottom:20px}.oksrt-share hr{width:100%;background:#f4f4f4;opacity:.1}.oksrt-row{display:flex;flex-direction:row;width:100%}.oksrt-row .oksrt-col{display:flex;flex-direction:column;justify-content:center;text-align:center;flex:0 0 25%;-ms-flex:0 0 25%;width:25%}.oksrt-row .oksrt-col svg{width:32px;height:32px}.oksrt-row .oksrt-col p{margin-top:4px;font-size:16px}.oksrt-circle{display:flex;align-items:center;justify-content:center;margin:auto;padding:16px;width:40px;height:40px;border-radius:50%;transform:translateY(0);transition:transform 250ms ease}.oksrt-circle:hover{cursor:pointer;transform:translateY(-3px)}.oksrt-copybox{margin-top:16px;padding:8px;display:flex;flex-direction:row;background:#181818}.oksrt-copybox input[type=text]{background:0 0;border:none;outline:0;color:#f4f4f4;width:80%;padding-left:16px;font-size:15px}.oksrt-copybox button{border:none;outline:0;background:0 0;color:#4c8bf5;padding:auto;width:20%;text-transform:uppercase;font-weight:700;font-size:16px;transition:color 250ms ease}.oksrt-loader{width:50px;height:50px;margin:16px auto;border-radius:50%;border:3px solid;border-top-color:#4c8bf5;border-left-color:rgba(76,139,245,.25);border-bottom-color:#4c8bf5;border-right-color:rgba(76,139,245,.25);animation:1s oksrt-spin infinite}@keyframes oksrt-spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}.oksrt-copybox button:hover{cursor:pointer;color:#296bdf}.oksrt-err{margin-top:0;margin-bottom:5px;color:rgb(75,75,75);}";let t=null==document.head?document.body:document.head;t.appendChild(e);let n=document.createElement("script");n.src="https://unpkg.com/feather-icons",t.appendChild(n),n.addEventListener("load",()=>{feather.replace()})},createMenu:function(){let e=document.createElement("div");e.classList.add("oksrt-overlay");let t=document.createElement("div");t.classList.add("oksrt-share");let n=document.createElement("span"),o=document.createElement("button"),r=document.createElement("i");r.dataset.feather="x";let i=document.createElement("h1");i.innerText="Getting your Link...";let s=document.createElement("div");s.classList.add("oksrt-loader"),o.appendChild(r),n.appendChild(o),t.appendChild(n),t.appendChild(i),t.appendChild(s),e.appendChild(t),this.closeEvent("btn",o),this.closeEvent("overlay",e),document.body.appendChild(e),feather.replace()},closeEvent:function(e,t){switch(e){case"btn":t.addEventListener("click",e=>{e.preventDefault();let t=document.querySelector(".oksrt-overlay");!0===this.shortened?this.hideMenu():t.remove()});break;case"overlay":t.addEventListener("click",e=>{if(e.preventDefault(),e.target!==t)return;let n=document.querySelector(".oksrt-overlay");!0===this.shortened?this.hideMenu():n.remove()});break;default:return}},btnEvent:function(){document.querySelector(".oksrt-con button").addEventListener("click",async e=>{e.preventDefault();let t=window.location.href;if(!0===this.shortened)this.showMenu();else{this.createMenu();const e=await fetch("https://api.okshort.net/?url="+encodeURIComponent(t)).catch(e=>{throw e});this.swapMenu(await e.json())}})},swapMenu:function(e){if(200==e.response.status){this.shortened=!0;let t=document.querySelector(".oksrt-loader"),n=t.parentNode;n.querySelector("h1").innerText="Ready to Share";let o=document.createElement("div");o.classList.add("oksrt-row");let r=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),a=document.createElement("div");r.classList.add("oksrt-col"),i.classList.add("oksrt-col"),s.classList.add("oksrt-col"),a.classList.add("oksrt-col");let l=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div"),p=document.createElement("div");l.classList.add("oksrt-circle"),l.style.backgroundColor="#f4f4f4",l.style.color="#888888",d.classList.add("oksrt-circle"),d.style.backgroundColor="#ff4500",c.classList.add("oksrt-circle"),c.style.backgroundColor="#1da1f2",p.classList.add("oksrt-circle"),p.style.backgroundColor="#888888";let u=document.createElement("i");u.dataset.feather="code";let h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("width","24"),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24");let m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("d","M24 11.779c0-1.459-1.192-2.645-2.657-2.645-.715 0-1.363.286-1.84.746-1.81-1.191-4.259-1.949-6.971-2.046l1.483-4.669 4.016.941-.006.058c0 1.193.975 2.163 2.174 2.163 1.198 0 2.172-.97 2.172-2.163s-.975-2.164-2.172-2.164c-.92 0-1.704.574-2.021 1.379l-4.329-1.015c-.189-.046-.381.063-.44.249l-1.654 5.207c-2.838.034-5.409.798-7.3 2.025-.474-.438-1.103-.712-1.799-.712-1.465 0-2.656 1.187-2.656 2.646 0 .97.533 1.811 1.317 2.271-.052.282-.086.567-.086.857 0 3.911 4.808 7.093 10.719 7.093s10.72-3.182 10.72-7.093c0-.274-.029-.544-.075-.81.832-.447 1.405-1.312 1.405-2.318zm-17.224 1.816c0-.868.71-1.575 1.582-1.575.872 0 1.581.707 1.581 1.575s-.709 1.574-1.581 1.574-1.582-.706-1.582-1.574zm9.061 4.669c-.797.793-2.048 1.179-3.824 1.179l-.013-.003-.013.003c-1.777 0-3.028-.386-3.824-1.179-.145-.144-.145-.379 0-.523.145-.145.381-.145.526 0 .65.647 1.729.961 3.298.961l.013.003.013-.003c1.569 0 2.648-.315 3.298-.962.145-.145.381-.144.526 0 .145.145.145.379 0 .524zm-.189-3.095c-.872 0-1.581-.706-1.581-1.574 0-.868.709-1.575 1.581-1.575s1.581.707 1.581 1.575-.709 1.574-1.581 1.574z"),m.setAttribute("fill","#FFFFFF"),h.appendChild(m);let b=document.createElement("i");b.dataset.feather="twitter";let f=document.createElement("i");f.dataset.feather="mail";let k=document.createElement("p");k.innerText="Embed";let x=document.createElement("p");x.innerText="Reddit";let g=document.createElement("p");g.innerText="Twitter";let y=document.createElement("p");y.innerText="Email",r.appendChild(l),l.appendChild(u),r.appendChild(k),i.appendChild(d),d.appendChild(h),i.appendChild(x),s.appendChild(c),c.appendChild(b),s.appendChild(g),a.appendChild(p),p.appendChild(f),a.appendChild(y),this.setShareBtn("embed",l,"https://okshort.net/"+e.response.body.code),this.setShareBtn("reddit",d,"https://okshort.net/"+e.response.body.code),this.setShareBtn("twitter",c,"https://okshort.net/"+e.response.body.code),this.setShareBtn("email",p,"https://okshort.net/"+e.response.body.code),o.appendChild(r),o.appendChild(i),o.appendChild(s),o.appendChild(a),n.replaceChild(o,t);let w=document.createElement("hr");n.appendChild(w);let C=document.createElement("div");C.classList.add("oksrt-copybox");let v=document.createElement("input");v.type="text",v.id="okshort-url",v.value="https://okshort.net/"+e.response.body.code,v.readOnly=!0;let E=document.createElement("button");E.innerText="Copy",C.appendChild(v),C.appendChild(E),n.appendChild(C),this.setCopyBtn(E),feather.replace()}else{let t=document.querySelector(".oksrt-loader");t.parentNode.querySelector("h1").innerText="Something went wrong";let n=document.createElement("p");n.innerText="There was an error processing the link. Please try again later.";let o=document.createElement("p");o.classList.add("oksrt-err"),o.innerText="Code: "+e.response.status;let r=document.createElement("p");r.classList.add("oksrt-err"),r.innerText="Message: "+e.response.status_text,t.parentNode.replaceChild(n,t),n.parentNode.appendChild(o),n.parentNode.appendChild(r)}},setShareBtn:function(e,t,n){switch(e){case"embed":t.addEventListener("click",()=>{let e=document.querySelector("#okshort-url");e.readOnly=!1,e.value='<iframe width="560" height="315" src="'+n+'" title="'+document.title+'" frameborder="0"></iframe>',e.readOnly=!0});break;case"reddit":t.addEventListener("click",()=>{window.open("https://www.reddit.com/submit?url="+encodeURIComponent(n)+"&title="+encodeURIComponent(document.title))});break;case"twitter":t.addEventListener("click",()=>{window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(document.title+". Here's the link: ")+"&url="+encodeURIComponent(n))});break;case"email":t.addEventListener("click",()=>{window.open("mailto:username@emample.com?subject="+encodeURIComponent(document.title)+"&subject=Subject&body="+encodeURIComponent(document.title+"Here's the link, take a look at it: "+n))});break;default:return}},setCopyBtn:async function(e){e.addEventListener("click",t=>{t.preventDefault();let n=document.querySelector("#okshort-url");n.select(),navigator.clipboard.writeText(n.value),e.innerText="Copied",setTimeout(()=>{e.innerText="Copy"},3e3)})},showMenu:function(){document.querySelector(".oksrt-overlay").style.display="block"},hideMenu:function(){document.querySelector(".oksrt-overlay").style.display="none"}};
